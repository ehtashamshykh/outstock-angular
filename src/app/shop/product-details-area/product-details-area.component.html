<section class="shop__area pb-65">
  <div class="shop__top grey-bg-6 pt-100 pb-90">
    <div class="container">
      <app-product-details-upper [product]="product!"></app-product-details-upper>
    </div>
  </div>
  <div class="shop__bottom">
    <div class="container">
      <div class="row">
        <div class="col-xl-12">
          <div class="product__details-tab">
            <div class="product__details-tab-nav text-center mb-45">
              <nav>
                <div class="nav nav-tabs justify-content-start justify-content-sm-center" id="pro-details" role="tablist">
                  <a class="nav-item nav-link active" id="des-tab" data-bs-toggle="tab" href="#des" role="tab" aria-controls="des" aria-selected="true">Description</a>
                  <a class="nav-item nav-link" id="add-tab" data-bs-toggle="tab" href="#add" role="tab"
                    aria-controls="add" aria-selected="false">Additional Information</a>
                  <a class="nav-item nav-link" id="review-tab" data-bs-toggle="tab" href="#review" role="tab" aria-controls="review" aria-selected="false">Reviews ({{productReviews.length || 0}})</a>
                </div>
              </nav>
            </div>
            <div class="tab-content" id="pro-detailsContent">
              <div class="tab-pane fade show active" id="des" role="tabpanel">
                <div class="product__details-des">
                  <p>{{product?.details?.details_text || product?.description}}</p>
                  <div class="product__details-des-list mb-20">
                    <ul>
                      <li *ngFor="let list of product?.details?.details_list || product?.additionalDetails">
                        <span>{{list}}</span>
                      </li>
                    </ul>
                  </div>
                  <p>{{product?.details?.details_text_2}}</p>
                </div>
              </div>
              <div class="tab-pane fade" id="add" role="tabpanel">
                <div class="product__details-add">
                  <ul>
                    <li><span>Weight</span></li>
                    <li><span>{{product?.weight}}</span></li>
                    <li><span>Dimention</span></li>
                    <li><span>{{product?.dimension}}</span></li>
                    <li><span>Size</span></li>
                    <li><span>{{ product?.sizes || 'NAN' }}</span></li>
                  </ul>
                </div>
              </div>
              <div class="tab-pane fade" id="review" role="tabpanel">
                <div class="product__details-review">
                  <div class="postbox__comments">
                    <div class="postbox__comment-title mb-30">
                      <h3>Reviews ({{productReviews.length || 0}})</h3>
                    </div>
                    <div class="latest-comments mb-30">
                      <ul *ngIf="productReviews">
                        <li *ngFor="let r of productReviews">
                          <div class="comments-box">
                            <div class="comments-avatar">
                              <img [src]="r.imageUrls" alt="user">
                            </div>
                            <div class="comments-text">
                              <div class="avatar-name">
                                <h5>{{r.reviewer.name}}</h5>
                                <!-- <span> - {{r?.time || 0}} </span> -->
                              </div>
                              <div class="user-rating">
                                <ul>
                                  <li *ngFor="let star of [1, 2, 3, 4, 5]; let i = index">
                                    <a href="#">
                                      <i [ngClass]="i < r.rating ? 'fas fa-star' : 'fal fa-star'"></i>
                                    </a>
                                  </li>
                                </ul>
                              </div>
                              <p>{{r.reviewText}}</p>
                            </div>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div>
                  <div class="post-comments-form mb-100">
                    <div class="post-comments-title mb-30">
                      <h3>Your Review</h3>
                    </div>
                   <!-- review form start -->
                    <app-review-form [productId]="product?.id" (reviewCallCheck)="reCallReviews($event)"></app-review-form>     
                   <!-- review form end -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
